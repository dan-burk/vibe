{
  "name": "R in Docker (ARM64)",
  "build": {
    "dockerfile": "Dockerfile"
  },
  "features": {
    "ghcr.io/devcontainers/features/github-cli:1": {}
  },

  // === Claude Code Authentication Options ===
  // Two methods available:
  //
  // Option 1 (default): OAuth login - Run "claude login" inside the container
  // Port 54545 is forwarded for the OAuth callback
  //
  // Option 2: API key - Uncomment runArgs below, copy example_api.env to api.env
  // "runArgs": ["--env-file", ".devcontainer/api.env"],

  "customizations": {
    "vscode": {
      "extensions": [
        "REditorSupport.r",
        "RDebugger.r-debugger",
        "ms-azuretools.vscode-docker"
      ],
      "settings": {
        "r.rterm.linux": "/usr/local/bin/R",
        "r.alwaysUseActiveTerminal": true
      }
    }
  },
  "forwardPorts": [3838, 54545],
  "portsAttributes": {
    "3838": { "label": "Shiny app", "onAutoForward": "openBrowser" },
    "54545": { "label": "Claude OAuth", "onAutoForward": "silent" }
  }
}
