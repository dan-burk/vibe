{
  "name": "R in Docker (AMD64)",
  "build": {
    "dockerfile": "Dockerfile"
  },
  "features": {
    "ghcr.io/devcontainers/features/github-cli:1": {}
  },

  // === Claude Code Authentication Options ===
  // Two methods available (in priority order):
  //
  // Option 1: .env file - Uncomment runArgs below, copy example_api.env to api.env
  // "runArgs": ["--env-file", ".devcontainer/api.env"],
  //
  // Option 2: Environment variable from host (automatically passed if set)
  // Set CLAUDE_CODE_OAUTH_TOKEN on your host machine

  // Pass auth from host environment (ignored if not set)
  "remoteEnv": {
    "CLAUDE_CODE_OAUTH_TOKEN": "${localEnv:CLAUDE_CODE_OAUTH_TOKEN}"
  },

  "customizations": {
    "vscode": {
      "extensions": [
        "REditorSupport.r",
        "RDebugger.r-debugger",
        "posit.shiny",
        "ms-azuretools.vscode-docker"
      ],
      "settings": {
        "r.rterm.linux": "/usr/bin/R",
        "r.alwaysUseActiveTerminal": true
      }
    }
  },
  
  "remoteUser": "shiny",
  "forwardPorts": [3838],
  "portsAttributes": {
    "3838": { "label": "Shiny app", "onAutoForward": "openBrowser" }
  },
  "postCreateCommand": "echo '{\"hasCompletedOnboarding\": true}' > ~/.claude.json"
}
